<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ランダム質問表示</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>クイズ500のこと風ランダム質問</h1>
  <div id="question-container">ここに質問が表示されます</div>
  <button id="next-question">次の質問</button>
  <p id="status"></p>

  <script>
    const questionContainer = document.getElementById('question-container');
    const status = document.getElementById('status');
    const button = document.getElementById('next-question');

    // ここにGoogle Apps Scriptの公開URLを入れてください
    const GAS_URL = "https://script.google.com/macros/s/AKfycbzc4CK3SML40hTndAAn9vRiECpBtfx7UjAzTCrvSYC1Gv0-SeQnVxkq5N-TADfSW1o/exec";

    let questions = [];

    async function fetchQuestions() {
      status.textContent = "質問を取得中...";
      try {
        const res = await fetch(GAS_URL);
        if (!res.ok) throw new Error(`HTTP error ${res.status}`);
        const data = await res.json();
        if (data.error) {
          status.textContent = "エラー: " + data.error;
          return;
        }
        questions = data.questions;
        status.textContent = "";
        showRandomQuestion();
      } catch (e) {
        status.textContent = "質問の取得に失敗しました";
        console.error(e);
      }
    }

    function showRandomQuestion() {
      if (questions.length === 0) {
        questionContainer.textContent = "質問がありません";
        return;
      }
      const randomIndex = Math.floor(Math.random() * questions.length);
      questionContainer.textContent = questions[randomIndex];
    }

    button.addEventListener('click', () => {
      button.disabled = true;
      status.textContent = "読み込み中...";
      setTimeout(() => {
        showRandomQuestion();
        status.textContent = "";
        button.disabled = false;
      }, 100);  // 読み込みっぽく少し遅延をつける
    });

    // 初回ロードで質問を取得
    fetchQuestions();
  </script>
</body>
</html>

