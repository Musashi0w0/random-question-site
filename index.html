<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>クイズ質問表示</title>
</head>
<body>
  <h1 id="question">ここに質問が表示されます</h1>
  <button id="nextButton">次の質問</button>

  <script>
    const sheetURL = 'https://docs.google.com/spreadsheets/d/<スプレッドシートID>/gviz/tq?tqx=out:json&sheet=シート1'; // ←IDとシート名を差し替えて

    const questionElement = document.getElementById('question');
    const nextButton = document.getElementById('nextButton');

    async function fetchQuestion() {
      // ボタンを無効化
      nextButton.disabled = true;
      questionElement.textContent = '読み込み中…';

      try {
        const response = await fetch(sheetURL);
        const text = await response.text();

        // JSON形式に変換
        const json = JSON.parse(text.substr(47).slice(0, -2));
        const rows = json.table.rows;

        const questions = rows.map(row => row.c[0]?.v).filter(q => q); // null除去
        const randomQuestion = questions[Math.floor(Math.random() * questions.length)];

        questionElement.textContent = randomQuestion;
      } catch (error) {
        questionElement.textContent = '質問の取得に失敗しました';
        console.error(error);
      }

      // ボタンを有効化
      nextButton.disabled = false;
    }

    nextButton.addEventListener('click', fetchQuestion);
  </script>
</body>
</html>
